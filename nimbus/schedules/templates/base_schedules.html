{% extends "base.html" %}

{% block page %}

    <!-- TODO: Prever um agendamento já definido. -->
    <div class="block withsidebar" id="schedule">
		<div class="block_head">
			<div class="bheadl"></div>
			<div class="bheadr"></div>

			<h2 style="font-size: 1.2em">
			    Editar agendamento
			</h2>
		</div>		<!-- .block_head ends -->

		<div class="block_content">

            <form action="" method="post">
    	        <script type="text/javascript" charset="utf-8">
    	            $(document).ready(function(){
    		            $('.schedule_activate').change(function(){
    		                _checked = $(this).attr('checked');
    		                _class = $(this).attr('id');
    		                if (_checked) {
    			                $('.' + _class).addClass('active');
    		                } else {
    		                    $('.' + _class).removeClass('active');
    		                }
    		            });
    		            $('.schedule_activate').change();
    	            });
    	        </script>

                <div style="float: right; padding: 10px 20px 0 0">
                    {% if errors.schedule_name %}
                    <ul class="errorlist" style="">
                        <li>{{ errors.schedule_name }}</li>
                    </ul>
                    {% endif %}
                    {% if errors.schedule_day %}
                    <ul class="errorlist" style="">
                        <li>{{ errors.schedule_day }}</li>
                    </ul>
                    {% endif %}
                    {% if errors.schedule_hour %}
                    <ul class="errorlist" style="">
                        <li>{{ errors.schedule_hour }}</li>
                    </ul>
                    {% endif %}
                    
    		        <label>Nome do agendamento:</label> <input type="text" class="text small" name="schedule.name" value="{{ schedule.name }}" />
    		    </div>

    			<div class="sidebar">
    				<ul class="sidemenu">
    					<li><a href="#mensal" class="monthly active">Mensal</a></li>
    					<li><a href="#semanal" class="weekly">Semanal</a></li>
    					<li><a href="#diario" class="dayly">Diário</a></li>
    					<li><a href="#minuto" class="hourly">Minuto</a></li>
    				</ul>
	
                    <p>Agende a execução deste backup, é possível ativar mais de um agendamento.</p>
    			</div>		<!-- .sidebar ends -->
        
    			<div class="sidebar_content" id="mensal">
    			    <p>
                        <input {% if schedule.monthly_set.count %}checked="checked"{% endif %} type="checkbox" name="schedule.monthly.active" class="schedule_activate" id="monthly" value="1" /> <label for="monthly">Ativar</label>
                    </p>
                    <div class="personal_message"><p>Executa o backup em determinados dias do mês, sempre no horário especificado.</p></div>
                    <p>
                        <label>Dias do mês:</label><br/>
                        {% for day in days %}
                        <span style="display: block; width: 70px; float: left">
                            <input type="checkbox" id="day_{{day}}" name="schedule.monthly.day" value="{{day}}" {% for i in schedule.monthly_set.all %}{% if i.day == day %}checked="checked"{% endif %}{% endfor %} />
                            <label for="day_{{day}}">{{day}}º</label>
                        </span>
                        {% endfor %}
                    </p>
                    <p>
                        <label for="mothly_hour">Hora:</label><br/>
                        <input type="text" name="schedule.monthly.hour" id="mothly_hour" class="text small" style="width: 65px" value="{% for i in schedule.monthly_set.all %}{{ i.hour }}{% endfor %}" /><br/>
                        <small>Exemplo: 10:20, 21:35 ou 07:08.</small>
                    </p>
                    <p>
                        <label for="level_id">Tipo de backup:</label><br/>
                        <select class="styled" id="level_id" name="schedule.monthly.level">
                            {% for level in levels %}
                            <option value="{{level}}" {% for i in schedule.monthly_set.all %}{% if i.level == level %}selected="selected"{% endif %}{% endfor %}>{{level}}</option>
                            {% endfor %}
                        </select>
                        <small style="line-height: 1.2em">No backup full é feita uma cópia completa de todos os arquivos "marcados" para backup. No incremental é feita uma cópia apenas das modificações. É importamente sempre manter uma política mista de backups.</small>
                    </p>
                    <p>
                        <input type="submit" class="submit" value="Editar" />
                    </p>
    			</div>		<!-- .sidebar_content ends -->
        
    			<div class="sidebar_content" id="semanal">
    			    <p>
                        <input {% if schedule.weekly_set.count %}checked="checked"{% endif %} type="checkbox" name="schedule.weekly.active" class="schedule_activate" id="weekly" value="1" /> <label for="weekly">Ativar</label>
                    </p>
                    <div class="personal_message"><p>Executa o backup em determinados dias da semana, sempre no horário especificado.</p></div>
                    <p>
                        <label>Dias da semana:</label><br/>
                        {% for day in weekdays %}
                        <input type="checkbox" id="day_{{day}}" name="schedule.weekly.day" value="{{day}}" {% for i in schedule.weekly_set.all %}{% if i.day == day %}checked="checked"{% endif %}{% endfor %} />
                        <label for="day_{{day}}">{{day|title}}</label>
                        {% endfor %}
                    </p>
                    <p>
                        <label for="mothly_hour">Hora:</label><br/>
                        <input type="text" name="schedule.weekly.hour" id="mothly_hour" class="text small" style="width: 65px" maxlength="5" value="{% for i in schedule.weekly_set.all %}{{ i.hour }}{% endfor %}" /><br/>
                        <small>Exemplo: 10:20, 21:35 ou 07:08.</small>
                    </p>
                    <p>
                        <label for="level_id">Tipo de backup:</label><br/>
                        <select class="styled" id="level_id" name="schedule.weekly.level">
                            {% for level in levels %}
                            <option value="{{level}}" {% for i in schedule.weekly_set.all %}{% if i.level == level %}selected="selected"{% endif %}{% endfor %}>{{level}}</option>
                            {% endfor %}
                        </select>
                        <small style="line-height: 1.2em">No backup full é feita uma cópia completa de todos os arquivos "marcados" para backup. No incremental é feita uma cópia apenas das modificações. É importamente sempre manter uma política mista de backups.</small>
                    </p>
                    <p>
                        <input type="submit" class="submit" value="Editar" />
                    </p>
    			</div>		<!-- .sidebar_content ends -->
        
    			<div class="sidebar_content" id="diario">
    			    <p>
                        <input {% if schedule.daily_set.count %}checked="checked"{% endif %} type="checkbox" name="schedule.dayly.active" class="schedule_activate" id="dayly" value="1" /> <label for="dayly">Ativar</label><br/>
                    </p>
                    <div class="personal_message"><p>Executa o backup todos os dias, sempre no horário especificado.</p></div>
                    <p>
                        <label for="dayly_hour">Hora:</label><br/>
                        <input type="text" name="schedule.dayly.hour" id="dayly_hour" class="text small" style="width: 65px" maxlength="5" value="{% for i in schedule.daily_set.all %}{{ i.hour }}{% endfor %}" /><br/>
                        <small>Exemplo: 10:20, 21:35 ou 07:08.</small>
                    </p>
                    <p>
                        <label for="level_id">Tipo de backup:</label><br/>
                        <select class="styled" id="level_id" name="schedule.dayly.level">
                            {% for level in levels %}
                            <option value="{{level}}" {% for i in schedule.daily_set.all %}{% if i.level == level %}selected="selected"{% endif %}{% endfor %}>{{level}}</option>
                            {% endfor %}
                        </select>
                        <small style="line-height: 1.2em">No backup full é feita uma cópia completa de todos os arquivos "marcados" para backup. No incremental é feita uma cópia apenas das modificações. É importamente sempre manter uma política mista de backups.</small>
                    </p>
                    <p>
                        <input type="submit" class="submit" value="Editar" />
                    </p>
    			</div>		<!-- .sidebar_content ends -->
        
                <div class="sidebar_content" id="minuto">
                    <p>
                        <input {% if schedule.hourly_set.count %}checked="checked"{% endif %} type="checkbox" name="schedule.hourly.active" class="schedule_activate" id="hourly" value="1" /> <label for="hourly">Ativar</label>
                    </p>
                    <div class="personal_message"><p>Executa o backup todas as horas do dia, sempre no minuto especificado.</p></div>
                    <p>
                        <label for="hourly_hour">Minuto:</label><br/>
                        <input type="text" name="schedule.hourly.minute" id="hourly_hour" class="text small" style="width: 45px" maxlength="2" value="{% for i in schedule.hourly_set.all %}{{ i.hour|slice:'3:' }}{% endfor %}" /><br/>
                        <small>Exemplo: 20, 35 ou 08.</small>
                    </p>
                    <p>
                        <label for="level_id">Tipo de backup:</label><br/>
                        <select class="styled" id="level_id" name="schedule.hourly.level">
                            {% for level in levels %}
                            <option value="{{level}}" {% for i in schedule.hourly_set.all %}{% if i.level == level %}selected="selected"{% endif %}{% endfor %}>{{level}}</option>
                            {% endfor %}
                        </select>
                        <small style="line-height: 1.2em">No backup full é feita uma cópia completa de todos os arquivos "marcados" para backup. No incremental é feita uma cópia apenas das modificações. É importamente sempre manter uma política mista de backups.</small>
                    </p>
                    <p>
                        <input type="submit" class="submit" value="Editar" />
                    </p>
                </div>
            </form>
		</div>		<!-- .block_content ends -->

		<div class="bendl"></div>
		<div class="bendr"></div>

	</div>		<!-- .block .schedule ends -->

{% endblock %}